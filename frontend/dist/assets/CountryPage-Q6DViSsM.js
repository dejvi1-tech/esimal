import{j as e}from"./ui-vendor-Cb7BQMVa.js";import{i as t,f as s,a}from"./react-vendor-gzvTUj6_.js";import{d as r,i as l}from"./index-DcjmXfUi.js";import{e as i}from"./countries-CNVzw6Kl.js";import"./utils-vendor-Dyq5Ev4R.js";import"./animation-vendor-U7UFP-tZ.js";const d=({pkg:t,selected:s,onSelect:a})=>e.jsxs("div",{className:"flex flex-col justify-between p-4 bg-slate-100/30 dark:bg-slate-900/50 backdrop-blur-sm border rounded-xl shadow-lg transition-all cursor-pointer h-full min-w-0 "+(s?"border-purple-500 ring-2 ring-purple-500/30":"border-white/20 hover:border-purple-500/50"),onClick:a,style:{minHeight:"110px"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:l(t.data_amount)}),e.jsx("span",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center "+(s?"border-purple-500 bg-purple-500":"border-gray-400 dark:border-gray-600 bg-transparent"),children:s&&e.jsx("span",{className:"w-2 h-2 bg-white rounded-full block"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("span",{children:[t.validity_days," DitÃ«"]}),e.jsxs("span",{className:"font-bold text-base "+(s?"text-purple-600 dark:text-purple-400":"text-gray-800 dark:text-gray-200"),children:["â‚¬",t.sale_price.toFixed(2)]})]})]}),n=()=>{const{code:l}=t(),{language:n}=r(),o=s(),[c,m]=a.useState([]),[x,h]=a.useState(!0),[p,u]=a.useState(""),[g,j]=a.useState(null),[b,f]=a.useState(""),[y,k]=a.useState("");return a.useEffect(()=>{l&&(h(!0),u(""),console.log("Fetching packages for country code:",l),fetch(`/api/search-packages?country=${encodeURIComponent(l)}`).then(e=>e.json()).then(e=>{var t;console.log("Raw packages from API:",e);const s=e.filter((e,t,s)=>t===s.findIndex(t=>t.data_amount===e.data_amount&&t.validity_days===e.validity_days&&t.sale_price===e.sale_price&&t.country_name===e.country_name));console.log("Deduplicated packages:",s),m(s),j((null==(t=s[0])?void 0:t.id)||null),h(!1);const a=i.find(e=>e.code===l);f(a?a.name[n]:l.toUpperCase()),k(a?a.flag:"")}).catch(()=>{u("Failed to fetch packages"),h(!1)}))},[l,n]),x?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-white/30 border-t-white mb-4"}),e.jsx("div",{className:"text-xl text-gray-800 dark:text-gray-200",children:"Loading packages..."})]}):p?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center p-4",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-red-500",children:"Error"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:p})]}):c&&0!==c.length?e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8 mt-12",children:[y&&e.jsx("img",{src:y,alt:b,className:"w-20 h-14 rounded shadow mb-4"}),e.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-gray-200 mb-4",children:b})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 items-start",children:[e.jsx("div",{className:"flex justify-center items-start w-full h-full mt-0 md:-mt-8",children:e.jsx("img",{src:"/static/esimfly-plane-beach.jpg",alt:"e-SimFly airplane on beach",className:"rounded-2xl shadow-lg w-full max-w-lg md:max-w-xl aspect-square object-cover object-center border border-white/10",style:{minHeight:"300px",maxHeight:"500px"}})}),e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:c.map(t=>e.jsx(d,{pkg:t,selected:g===t.id,onSelect:()=>j(t.id)},t.id))}),e.jsxs("div",{className:"max-w-xl mx-auto",children:[e.jsx("button",{className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:opacity-90 text-white text-lg font-bold py-3 rounded-full shadow-lg transition-all duration-200 mb-5 disabled:opacity-50 disabled:cursor-not-allowed",style:{letterSpacing:"0.03em"},onClick:()=>{g&&o(`/checkout?country=${l}&package=${g}`)},disabled:!g,children:"BLEJ TANI"}),e.jsx("div",{className:"bg-slate-100/30 dark:bg-slate-900/50 backdrop-blur-sm border border-white/20 rounded-xl p-5 text-gray-800 dark:text-gray-200 text-base shadow-lg",children:e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{children:"Mos u shqetÃ«so nÃ«se ke ndonjÃ« problem me aktivizimin â€“ ose e rregullojmÃ« menjÃ«herÃ«, ose tÃ« kthejmÃ« paratÃ«. Pa stres, rimbursim i plotÃ«! ğŸ˜Š"}),e.jsx("li",{children:"Zgjidh planin qÃ« tÃ« shkon mÃ« shumÃ« dhe aktivizoje kur tÃ« duash â€“ nuk ka afat skadimi, ai tÃ« pret derisa tÃ« jesh gati."}),e.jsx("li",{children:"Pagesa Ã«shtÃ« super e lehtÃ« dhe e sigurt â€“ pÃ«rdorim vetÃ«m platformat mÃ« tÃ« besueshme, kÃ«shtu qÃ« je gjithmonÃ« i mbrojtur."}),e.jsx("li",{children:"Dhe po, jemi kÃ«tu pÃ«r ty 24/7! Na shkruaj kur tÃ« kesh pyetje apo ndonjÃ« problem â€“ pÃ«rgjigjemi shpejt dhe me kÃ«naqÃ«si."})]})})]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center p-4",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-gray-800 dark:text-gray-200",children:b}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg",children:"No eSIM packages available yet for this destination."})]})};export{n as default};
